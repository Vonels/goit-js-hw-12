{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '53269765-cd39f78e40f469f4b1e9f0733';\nconst BASE_URL = 'https://pixabay.com/api/';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      page,\n      per_page: 15,\n    },\n  });\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\nlet lightbox;\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n        <li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n          </a>\n\n          <ul class=\"info\">\n            <li><b>Likes</b> ${likes}</li>\n            <li><b>Views</b> ${views}</li>\n            <li><b>Comments</b> ${comments}</li>\n            <li><b>Downloads</b> ${downloads}</li>\n          </ul>\n        </li>\n      `\n    )\n    .join('');\n\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}\n\nexport function clearGallery() {\n  gallery.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('boost');\n}\n\nexport function hideLoader() {\n  loader.classList.add('boost');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('boost');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('boost');\n}\n","import { getImagesByQuery } from './js/pixabay-api';\nimport {\n  clearGallery,\n  createGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet query = '';\nlet page = 1;\nconst PER_PAGE = 15;\n\nform.addEventListener('submit', onSearch);\nloadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(event) {\n  event.preventDefault();\n\n  const searchValue = event.currentTarget.elements['search-text'].value.trim();\n\n  if (!searchValue) {\n    iziToast.warning({\n      message: 'Please enter a search query ðŸ™‚',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  query = searchValue;\n  page = 1;\n\n  clearGallery();\n  hideLoadMoreButton();\n\n  loadImages(false);\n}\n\nfunction onLoadMore() {\n  page += 1;\n  loadImages(true);\n}\n\nasync function loadImages(isLoadMore) {\n  showLoader();\n\n  try {\n    const data = await getImagesByQuery(query, page);\n    const { hits, totalHits } = data;\n\n    hideLoader();\n\n    if (!hits.length && !isLoadMore) {\n      iziToast.info({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    createGallery(hits);\n\n    const maxPage = Math.ceil(totalHits / PER_PAGE);\n\n    if (page < maxPage) {\n      showLoadMoreButton();\n    } else {\n      hideLoadMoreButton();\n      if (isLoadMore) {\n        iziToast.info({\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    }\n\n    if (isLoadMore) {\n      scrollPage();\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n    });\n  }\n}\n\nfunction scrollPage() {\n  const firstCardRect = document\n    .querySelector('.gallery')\n    ?.firstElementChild?.getBoundingClientRect();\n\n  if (!firstCardRect) return;\n\n  const cardHeight =\n    firstCardRect.height || firstCardRect.bottom - firstCardRect.top;\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}\n"],"names":["API_KEY","BASE_URL","axios","getImagesByQuery","query","page","gallery","loader","loadMoreBtn","lightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","PER_PAGE","onSearch","onLoadMore","event","searchValue","iziToast","loadImages","isLoadMore","data","hits","totalHits","maxPage","scrollPage","firstCardRect","_b","_a","cardHeight"],"mappings":"+vBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAEjBC,EAAM,SAAS,QAAUD,EAElB,eAAeE,EAAiBC,EAAOC,EAAM,CAalD,OAZiB,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKF,EACL,EAAGI,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAC,EACA,SAAU,EACX,CACL,CAAG,GAEe,IAClB,CClBA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EACvD,IAAIC,EAEG,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IAAY;AAAA;AAAA,0CAE8BL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA,+BAIzCC,CAAK;AAAA,+BACLC,CAAK;AAAA,kCACFC,CAAQ;AAAA,mCACPC,CAAS;AAAA;AAAA;AAAA,OAIvC,EACA,KAAK,EAAE,EAEVb,EAAQ,mBAAmB,YAAaM,CAAM,EAEzCH,EAMHA,EAAS,QAAO,EALhBA,EAAW,IAAIW,EAAe,aAAc,CAC1C,aAAc,MACd,aAAc,GACpB,CAAK,CAIL,CAEO,SAASC,GAAe,CAC7Bf,EAAQ,UAAY,EACtB,CAEO,SAASgB,GAAa,CAC3Bf,EAAO,UAAU,OAAO,OAAO,CACjC,CAEO,SAASgB,GAAa,CAC3BhB,EAAO,UAAU,IAAI,OAAO,CAC9B,CAEO,SAASiB,GAAqB,CACnChB,EAAY,UAAU,OAAO,OAAO,CACtC,CAEO,SAASiB,GAAqB,CACnCjB,EAAY,UAAU,IAAI,OAAO,CACnC,CCrDA,MAAMkB,EAAO,SAAS,cAAc,OAAO,EACrClB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIJ,EAAQ,GACRC,EAAO,EACX,MAAMsB,EAAW,GAEjBD,EAAK,iBAAiB,SAAUE,CAAQ,EACxCpB,EAAY,iBAAiB,QAASqB,CAAU,EAEhD,eAAeD,EAASE,EAAO,CAC7BA,EAAM,eAAc,EAEpB,MAAMC,EAAcD,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OAEtE,GAAI,CAACC,EAAa,CAChBC,EAAS,QAAQ,CACf,QAAS,iCACT,SAAU,UAChB,CAAK,EACD,MACD,CAED5B,EAAQ2B,EACR1B,EAAO,EAEPgB,IACAI,IAEAQ,EAAW,EAAK,CAClB,CAEA,SAASJ,GAAa,CACpBxB,GAAQ,EACR4B,EAAW,EAAI,CACjB,CAEA,eAAeA,EAAWC,EAAY,CACpCZ,IAEA,GAAI,CACF,MAAMa,EAAO,MAAMhC,EAAiBC,EAAOC,CAAI,EACzC,CAAE,KAAA+B,EAAM,UAAAC,CAAW,EAAGF,EAI5B,GAFAZ,IAEI,CAACa,EAAK,QAAU,CAACF,EAAY,CAC/BF,EAAS,KAAK,CACZ,QACE,2EACF,SAAU,UAClB,CAAO,EACD,MACD,CAEDtB,EAAc0B,CAAI,EAElB,MAAME,EAAU,KAAK,KAAKD,EAAYV,CAAQ,EAE1CtB,EAAOiC,EACTd,KAEAC,IACIS,GACFF,EAAS,KAAK,CACZ,QAAS,6DACT,SAAU,UACpB,CAAS,GAIDE,GACFK,GAEH,MAAe,CACdhB,IACAS,EAAS,MAAM,CACb,QAAS,gDACT,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASO,GAAa,SACpB,MAAMC,GAAgBC,GAAAC,EAAA,SACnB,cAAc,UAAU,IADL,YAAAA,EAElB,oBAFkB,YAAAD,EAEC,wBAEvB,GAAI,CAACD,EAAe,OAEpB,MAAMG,EACJH,EAAc,QAAUA,EAAc,OAASA,EAAc,IAE/D,OAAO,SAAS,CACd,IAAKG,EAAa,EAClB,SAAU,QACd,CAAG,CACH"}